---
강의 리스트:
  - "[[데이터베이스]]"
생성 일시: 2022-11-11
유형: 필기
주차:
  - 6주차
---
# CREATE TABLE : 테이블 생성

# ALTER TABLE : 테이블 수정

# DROP TABLE : 테이블 삭제

  

# VIEW

: 다른 테이블을 기반으로 만들어진 가상 테이블

- 사용 방법은 테이블과 동일하지만 물리적인 데이터가 존재하는게 아닌 실시간으로 쿼리를 돌려서 나온 결과를 사용하는 것 → 원본T가 수정되면 자동으로 뷰도 수정되어 출력됨
- VIEW의 장점
    - 질의문이 간단하고 쉬워짐
    - 데이터의 보안 유지에 도움이 됨
    - 데이터 관리가 편리해짐

## VIEW의 생성 및 삭제

- 뷰의 생성
    
    ### CREATE VIEW 뷰_이름 [(속성,)]
    
    : 뷰의 이름과 뷰를 구성할 속성의 이름 나열
    
    ### AS SELECT
    
    : 생성하려는 뷰의 정의를 표현, ORDER BY 사용불가
    
    ### [WITH CHECK OPTION];
    
    : 뷰에 삽입이나, 수정 연산 수행시 SELECT문에서 제시한 정의 조건을 위반하면 수행되지 않도록 함
    
    ```SQL
    # 제품 테이블에서 제조업체별 제품수로 구성된 뷰를 업체별제품수 라는 이름으로 생성하기
    
    CREATE VIEW 업체별제품수 (제조업체, 제품수) AS
    	SELECT 제조업체, count(*)
    	FROM 제품
    	GROUP BY 제조업체
    WITH CHECK OPTION;
    
    SELECT * FROM 업체별제품수;
    
    # SELECT문 해야 뷰 출력가능
    # SELECT 할때 뷰의 쿼리를 실행한 결과에서 불러오게 됨
    ```
    

---

  

  

- 뷰의 삭제
    
    ### DROP VIEW 뷰_이름 CASCADE | RESTRICT;
    
    - 뷰를 삭제해도 기본T는 영향 없음
    - RESTRICT : 관련된 뷰 존재시 삭제 수행 금지  
        CASCADE : 관련된 뷰 모두 삭제  
        
    
      
    

## VIEW의 수정

: 기본 T가 수정됨

- 변경 불가능한 VIEW의 특징
    - 기본T의 기본키를 포함하지 않는 뷰
    - 집계함수로 새로 계산된 내용을 포함하는 뷰
    - DISTINCT 키워드로 정의된 뷰
    - GROUP BY절을 포함하여 정의된 뷰
    - 여러 테이블이 조인하여 정의된 뷰

  

- **튜플 삽입 : INSERT**
    
    : 뷰 속에 새로운 튜플 삽입
    
    - 기본T에는 존재하는 속성이지만 INSERT시에 속성값을 부여하지 않을경우 NULL로 채워짐
    
    ```SQL
    INSERT INTO 제품2 VALUES('시원냉면', 1000, '신선식품');
    ```
    
    > [!important] **뷰에 기본키가 존재하지 않아 변경이 불가능한 뷰에 INSERT를 할경우**
    > 
    > 기본키 속성의 속성값에 NULL이 들어가야 하지만 기본키 속성에는 NULL값을 넣을 수 없어 삽입 연산에 실패하게 됨
    
- **튜플 데이터값 변경 : UPDATE**
    
    : 테이블속 튜플의 속성값 수정
    
    ```SQL
    UPDATE 테이블_이름
    SET 속성_이름 = 값1, 속성_이름 = 값2, ...
    [WHERE 조건];
    
    # 속성_이름 = 값1 이 부분만 있다면 해당속성의 속성값이 전부 일괄 변경됨
    # 그래서 WHERE문으로 바꿀 속성값만 찾아서 바꿔줌
    ```
    
    ```SQL
    UPDATE 주문
    SET 수량 = 5
    WHERE 주문고객 IN (SELECT 고객아이디
    								 FROM 고객
    								 WHERE 고객이름 = '정소화');
    
    # IN을 사용하는 이유
    # 부속질의문 결과값이 동명이인의 정소화로 인해 여러개의 아이디가 나올수 있어서
    ```
    
- **튜플 삭제 : DELETE**
    
    : 테이블에 저장된 데이터를 삭제
    
    ```SQL
    DELETE
    FROM 테이블_이름
    [WHERE 조건];
    
    # WHERE 조건 없을시 모든 튜플을 지워 빈 테이블이 되버림
    ```